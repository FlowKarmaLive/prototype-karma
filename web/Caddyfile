{
	local_certs
	acme_ca https://acme-staging-v02.api.letsencrypt.org/directory
	order file_server before reverse_proxy
}
localhost {
	file_server /usr/home/freebsd/prototype-karma/static/*
	tls {
		client_auth {
			mode verify_if_given
			trusted_ca_cert_file /usr/home/freebsd/prototype-karma/clavinger/ca.crt
		}
	}
	reverse_proxy * localhost:8000 {
		header_up X-SSL-Client-Serial {http.request.tls.client.serial}
		header_up X-SSL-Client-Subject {http.request.tls.client.subject}
	}
        # Enable logging:
        log {
                output file /var/log/caddy/access.log
                # Common Log Format:
                format single_field common_log
        }
}
